on:
  push:
  workflow_dispatch:
    inputs:
      validate_certs:
        description: 'Use SSL? (validate_certs)'
        required: true
        default: false
        type: choice
        options:
        - true
        - false
      job_template:
        description: 'The Job Template name you want to launch'
        required: true
        type: string

jobs:
  automation_controller_job:
    runs-on: ubuntu-latest
    name: Kick off Automation controller job
    steps:
      - name: Load the ansible-cloud action
        id: controller
        uses: ansible-cloud/aap_controller_action@v1.0.2
        with:
          CONTROLLER_HOST: ${{ secrets.CONTROLLER_HOST }}
          CONTROLLER_USERNAME: ${{ secrets.CONTROLLER_USERNAME }}
          CONTROLLER_PASSWORD: ${{ secrets.CONTROLLER_PASSWORD }}
          CONTROLLER_VERIFY_SSL: false
      - name: The job template being executed
        run: echo "The job template is ${{ steps.controller.inputs.job_template }}"
